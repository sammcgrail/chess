<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>6D Chess</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>♟️</text></svg>">
    <link rel="stylesheet" href="css/style.css?v=20260221c">
    <script src="https://unpkg.com/lucide@latest"></script>
</head>
<body>
    <div id="app">
        <div id="scene-container"></div>
        <div id="sidebar">
            <div id="sidebar-resize"></div>
            <div id="status">White to move</div>
            <div id="fen-display" title="Click to copy FEN">
                <span id="fen-text"></span>
                <div id="fen-tooltip"></div>
            </div>
            <div id="timeline-panel">
                <div id="timeline-header">
                    <span class="timeline-toggle"></span>
                    Timelines
                </div>
                <div id="timeline-list"></div>
                <div id="timeline-resize"></div>
            </div>
            <div id="moves"></div>
            <div id="button-row">
                <button id="reset">New Game</button>
                <button id="cpu-toggle">Start CPU</button>
                <button id="example-play" title="Run scripted example game">▶ Demo</button>
            </div>
            <div id="cpu-controls">
                <!-- Basic Settings with Camera Toggle -->
                <div class="cpu-section cpu-sliders-row">
                    <div class="cpu-sliders">
                        <label>Speed: <input type="range" id="cpu-speed" min="100" max="2000" value="400" step="100"><span id="cpu-speed-value">1700ms</span></label>
                        <label>Max Timelines: <input type="range" id="max-timelines" min="0" max="30" value="6" step="1"><span id="max-timelines-value">6</span></label>
                    </div>
                    <button id="cpu-camera-toggle" class="active" title="Toggle camera follow"><i data-lucide="camera"></i></button>
                    <button id="2d-mode-toggle" title="Toggle 2D top-down view (T)"><i data-lucide="box"></i></button>
                </div>

                <!-- Stockfish Engine -->
                <div id="cpu-stockfish-controls" class="cpu-section cpu-stockfish-controls">
                    <div class="cpu-section-header">
                        <span><i data-lucide="brain"></i> Stockfish AI</span>
                        <div class="cpu-stockfish-toggle">
                            <button id="cpu-dumb-toggle" class="stockfish-toggle active" title="Toggle Stockfish on/off">ON</button>
                            <span id="cpu-stockfish-status" class="cpu-stockfish-status">Loading...</span>
                        </div>
                    </div>
                    <div class="cpu-skill-row">
                        <label><span class="cpu-color-dot white"></span>Skill: <input type="range" id="cpu-stockfish-skill-white" min="0" max="20" value="10" step="1"><span id="cpu-stockfish-skill-white-value">10</span></label>
                        <label><span class="cpu-color-dot black"></span>Skill: <input type="range" id="cpu-stockfish-skill-black" min="0" max="20" value="10" step="1"><span id="cpu-stockfish-skill-black-value">10</span></label>
                    </div>
                    <label>Depth: <input type="range" id="cpu-stockfish-depth" min="1" max="20" value="10" step="1"><span id="cpu-stockfish-depth-value">10</span></label>
                </div>

                <!-- 5D Chess Settings -->
                <div id="cpu-5d-controls" class="cpu-section">
                    <div class="cpu-section-header">
                        <span><i data-lucide="orbit"></i> 5D Aggression</span>
                    </div>
                    <label>Cross-Timeline %: <input type="range" id="cpu-cross-timeline" min="0" max="100" value="75" step="5"><span id="cpu-cross-timeline-value">75%</span></label>
                    <label>Time Travel %: <input type="range" id="cpu-time-travel" min="0" max="100" value="50" step="5"><span id="cpu-time-travel-value">50%</span></label>
                    <div class="portal-sliders">
                        <span class="portal-label">Per-Piece Portal %:</span>
                        <label title="Queen">♕<input type="range" id="cpu-portal-q" min="0" max="100" value="50" step="5"><span>50</span></label>
                        <label title="Rook">♖<input type="range" id="cpu-portal-r" min="0" max="100" value="40" step="5"><span>40</span></label>
                        <label title="Bishop">♗<input type="range" id="cpu-portal-b" min="0" max="100" value="35" step="5"><span>35</span></label>
                        <label title="Knight">♘<input type="range" id="cpu-portal-n" min="0" max="100" value="30" step="5"><span>30</span></label>
                    </div>
                </div>

                <!-- Color Controls (simplified) -->
                <div class="cpu-color-row">
                    <div class="cpu-color-item">
                        <span class="cpu-color-dot white"></span>
                        <span>White</span>
                        <button id="cpu-white-toggle" class="cpu-color-toggle active">ON</button>
                    </div>
                    <div class="cpu-color-item">
                        <span class="cpu-color-dot black"></span>
                        <span>Black</span>
                        <button id="cpu-black-toggle" class="cpu-color-toggle active">ON</button>
                    </div>
                </div>
            </div>
            <div id="command-panel">
                <input type="text" id="command-input" placeholder="e2e4 or fen or help">
                <div id="command-output"></div>
            </div>
            <div id="shortcuts-panel" class="collapsed">
                <div id="shortcuts-header">
                    <span class="shortcuts-toggle"></span>
                    Keyboard Shortcuts
                </div>
                <div id="shortcuts-content">
                    <div class="shortcut-group">Camera</div>
                    <div class="shortcut-row"><span class="key">W A S D</span> Pan camera</div>
                    <div class="shortcut-row"><span class="key">Q / E</span> Rotate view</div>
                    <div class="shortcut-row"><span class="key">C</span> Reset camera</div>
                    <div class="shortcut-row"><span class="key">Space</span> Flip board</div>
                    <div class="shortcut-group">Navigation</div>
                    <div class="shortcut-row"><span class="key">Left/Right</span> Prev/next move</div>
                    <div class="shortcut-row"><span class="key">Home/End</span> First/last move</div>
                    <div class="shortcut-row"><span class="key">Up/Down</span> Prev/next board</div>
                    <div class="shortcut-row"><span class="key">Tab</span> Cycle timelines</div>
                    <div class="shortcut-group">Board Selection</div>
                    <div class="shortcut-row"><span class="key">1-9, 0</span> Select board</div>
                    <div class="shortcut-row"><span class="key">F</span> Focus timeline</div>
                    <div class="shortcut-row"><span class="key">Z</span> Zoom in</div>
                    <div class="shortcut-row"><span class="key">X</span> Zoom out</div>
                    <div class="shortcut-row"><span class="key">V</span> Toggle zoom</div>
                    <div class="shortcut-row"><span class="key">T</span> Toggle 2D view</div>
                </div>
            </div>
            <div id="sidebar-footer">
                <span id="fps-counter">-- FPS</span>
                <span id="ghost-counter" title="MANDATORY_SYNC ghost removals this session">0</span>
                <span id="version-info">v0.2.91</span>
            </div>
        </div>
    </div>
    <!-- External libraries (bundled locally to avoid CDN loading issues) -->
    <script src="lib/chess.min.js"></script>
    <script src="lib/three.min.js"></script>
    <script src="lib/OrbitControls.js"></script>
    <!-- Stockfish chess engine loads via Web Worker from lib/stockfish-worker.js -->
    <!-- TypeScript compiled bundle (with cache buster) -->
    <script src="dist/bundle.js?v=20260219d"></script>
</body>
</html>
